; Listing generated by Microsoft (R) Optimizing Compiler Version 17.00.50727.1 

include listing.inc

INCLUDELIB OLDNAMES

PUBLIC	??_C@_0BA@EJBEGBHC@Unexpected?5EOF?6?$AA@	; `string'
PUBLIC	??_C@_0BC@PBMHBCIC@Missing?5syncbyte?6?$AA@	; `string'
PUBLIC	??_C@_1DA@MFOHJGPH@?$AAP?$AAr?$AAo?$AAg?$AAr?$AAa?$AAm?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AAP?$AAI?$AAD?$AA?3?$AA?5?$AA?$CF?$AA0?$AA3?$AAx?$AA?$AN?$AA?6?$AA?$AA@ ; `string'
PUBLIC	??_C@_1CI@JNKPIML@?$AAS?$AAe?$AAt?$AA?5?$AAP?$AAM?$AAT?$AA_?$AAP?$AAI?$AAD?$AA?5?$AAt?$AAo?$AA?5?$AA?$CF?$AAx?$AA?$AN?$AA?6?$AA?$AA@ ; `string'
EXTRN	__imp_fseek:PROC
EXTRN	__imp__fseeki64:PROC
EXTRN	__imp_memchr:PROC
;	COMDAT ??_C@_1CI@JNKPIML@?$AAS?$AAe?$AAt?$AA?5?$AAP?$AAM?$AAT?$AA_?$AAP?$AAI?$AAD?$AA?5?$AAt?$AAo?$AA?5?$AA?$CF?$AAx?$AA?$AN?$AA?6?$AA?$AA@
CONST	SEGMENT
??_C@_1CI@JNKPIML@?$AAS?$AAe?$AAt?$AA?5?$AAP?$AAM?$AAT?$AA_?$AAP?$AAI?$AAD?$AA?5?$AAt?$AAo?$AA?5?$AA?$CF?$AAx?$AA?$AN?$AA?6?$AA?$AA@ DB 'S'
	DB	00H, 'e', 00H, 't', 00H, ' ', 00H, 'P', 00H, 'M', 00H, 'T', 00H
	DB	'_', 00H, 'P', 00H, 'I', 00H, 'D', 00H, ' ', 00H, 't', 00H, 'o'
	DB	00H, ' ', 00H, '%', 00H, 'x', 00H, 0dH, 00H, 0aH, 00H, 00H, 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_1DA@MFOHJGPH@?$AAP?$AAr?$AAo?$AAg?$AAr?$AAa?$AAm?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AAP?$AAI?$AAD?$AA?3?$AA?5?$AA?$CF?$AA0?$AA3?$AAx?$AA?$AN?$AA?6?$AA?$AA@
CONST	SEGMENT
??_C@_1DA@MFOHJGPH@?$AAP?$AAr?$AAo?$AAg?$AAr?$AAa?$AAm?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AAP?$AAI?$AAD?$AA?3?$AA?5?$AA?$CF?$AA0?$AA3?$AAx?$AA?$AN?$AA?6?$AA?$AA@ DB 'P'
	DB	00H, 'r', 00H, 'o', 00H, 'g', 00H, 'r', 00H, 'a', 00H, 'm', 00H
	DB	' ', 00H, '%', 00H, 'd', 00H, ',', 00H, ' ', 00H, 'P', 00H, 'I'
	DB	00H, 'D', 00H, ':', 00H, ' ', 00H, '%', 00H, '0', 00H, '3', 00H
	DB	'x', 00H, 0dH, 00H, 0aH, 00H, 00H, 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BC@PBMHBCIC@Missing?5syncbyte?6?$AA@
CONST	SEGMENT
??_C@_0BC@PBMHBCIC@Missing?5syncbyte?6?$AA@ DB 'Missing syncbyte', 0aH, 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BA@EJBEGBHC@Unexpected?5EOF?6?$AA@
CONST	SEGMENT
??_C@_0BA@EJBEGBHC@Unexpected?5EOF?6?$AA@ DB 'Unexpected EOF', 0aH, 00H ; `string'
PUBLIC	?memchr@@YAPEAXPEAXH_K@Z			; memchr
PUBLIC	?FindStartOffset@@YAHPEAU_iobuf@@@Z		; FindStartOffset
PUBLIC	?resync@@YAHPEAEPEAU_iobuf@@@Z			; resync
PUBLIC	?parse_PAT@@YAXPEAEPEAG@Z			; parse_PAT
PUBLIC	?parse_PMT@@YAXPEAEPEAG1@Z			; parse_PMT
PUBLIC	?GetPTS@@YA_JPEAE@Z				; GetPTS
PUBLIC	?parse_Packet_Header@@YAXPEAUPacket_Header@@PEAE@Z ; parse_Packet_Header
;	COMDAT pdata
pdata	SEGMENT
$pdata$?FindStartOffset@@YAHPEAU_iobuf@@@Z DD imagerel $LN15
	DD	imagerel $LN15+166
	DD	imagerel $unwind$?FindStartOffset@@YAHPEAU_iobuf@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?resync@@YAHPEAEPEAU_iobuf@@@Z DD imagerel $LN23
	DD	imagerel $LN23+218
	DD	imagerel $unwind$?resync@@YAHPEAEPEAU_iobuf@@@Z
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?parse_PAT@@YAXPEAEPEAG@Z DD imagerel $LN13
	DD	imagerel $LN13+175
	DD	imagerel $unwind$?parse_PAT@@YAXPEAEPEAG@Z
;	COMDAT xdata
xdata	SEGMENT
$unwind$?parse_PAT@@YAXPEAEPEAG@Z DD 0a1801H
	DD	0a6418H
	DD	095418H
	DD	083418H
	DD	0f0143218H
	DD	07010e012H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?resync@@YAHPEAEPEAU_iobuf@@@Z DD 060f01H
	DD	07640fH
	DD	06340fH
	DD	0700b320fH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?FindStartOffset@@YAHPEAU_iobuf@@@Z DD 031b19H
	DD	0360109H
	DD	03002H
	DD	imagerel __GSHandlerCheck
	DD	01a0H
; Function compile flags: /Ogtpy
;	COMDAT ?parse_Packet_Header@@YAXPEAUPacket_Header@@PEAE@Z
_TEXT	SEGMENT
packet_header$ = 8
pbPacket$ = 16
?parse_Packet_Header@@YAXPEAUPacket_Header@@PEAE@Z PROC	; parse_Packet_Header, COMDAT
; File e:\project\other\caption2ass-master\caption2ass_pcr\tslutil.cpp
; Line 147
	movzx	eax, BYTE PTR [rdx]
	mov	r8, rcx
	mov	BYTE PTR [rcx], al
; Line 148
	movzx	eax, BYTE PTR [rdx+1]
	shr	al, 7
	and	al, 1
	mov	BYTE PTR [rcx+1], al
; Line 149
	movzx	eax, BYTE PTR [rdx+1]
	shr	al, 6
	and	al, 1
	mov	BYTE PTR [rcx+2], al
; Line 150
	movzx	eax, BYTE PTR [rdx+1]
	shr	al, 5
	and	al, 1
	mov	BYTE PTR [rcx+3], al
; Line 151
	movzx	eax, BYTE PTR [rdx+2]
	movzx	ecx, WORD PTR [rdx+1]
	and	cx, 31
	shl	cx, 8
	or	cx, ax
	mov	WORD PTR [r8+4], cx
; Line 152
	movzx	eax, BYTE PTR [rdx+3]
	shr	al, 6
	mov	BYTE PTR [r8+6], al
; Line 153
	movzx	eax, BYTE PTR [rdx+3]
	shr	al, 5
	and	al, 1
	mov	BYTE PTR [r8+7], al
; Line 154
	movzx	eax, BYTE PTR [rdx+3]
	shr	al, 4
	and	al, 1
	mov	BYTE PTR [r8+8], al
; Line 155
	movzx	eax, BYTE PTR [rdx+3]
	and	al, 15
	mov	BYTE PTR [r8+9], al
; Line 156
	ret	0
?parse_Packet_Header@@YAXPEAUPacket_Header@@PEAE@Z ENDP	; parse_Packet_Header
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT ?GetPTS@@YA_JPEAE@Z
_TEXT	SEGMENT
pbPacket$ = 8
?GetPTS@@YA_JPEAE@Z PROC				; GetPTS, COMDAT
; File e:\project\other\caption2ass-master\caption2ass_pcr\tslutil.cpp
; Line 58
	mov	rdx, rcx
; Line 61
	mov	ecx, 4
	mov	eax, ecx
	npad	6
$LL4@GetPTS:
; Line 65
	cmp	BYTE PTR [rax+rdx], 0
	jne	SHORT $LN3@GetPTS
	cmp	BYTE PTR [rax+rdx+1], 0
	jne	SHORT $LN3@GetPTS
	cmp	BYTE PTR [rax+rdx+2], 1
	jne	SHORT $LN3@GetPTS
	cmp	BYTE PTR [rax+rdx+3], 189		; 000000bdH
	je	SHORT $LN8@GetPTS
$LN3@GetPTS:
; Line 61
	inc	rax
	inc	ecx
	cmp	rax, 178				; 000000b2H
	jl	SHORT $LL4@GetPTS
; Line 88
	or	rax, -1
; Line 89
	ret	0
$LN8@GetPTS:
; Line 67
	lea	eax, DWORD PTR [rcx+9]
	movsxd	rcx, eax
	add	rcx, rdx
; Line 72
	movzx	eax, BYTE PTR [rcx+1]
	movzx	edx, BYTE PTR [rcx]
	shl	eax, 22
	shr	rdx, 1
	and	edx, 7
	shl	rdx, 30
	add	rdx, rax
; Line 75
	movzx	eax, BYTE PTR [rcx+2]
	and	eax, -2					; fffffffeH
	shl	eax, 14
	add	rdx, rax
; Line 78
	movzx	eax, BYTE PTR [rcx+3]
; Line 83
	movzx	ecx, BYTE PTR [rcx+4]
	shl	eax, 7
	shr	rcx, 1
	add	rdx, rax
	mov	rax, 3279421168659475843		; 2d82d82d82d82d83H
	add	rcx, rdx
	imul	rcx
	sar	rdx, 4
	mov	rax, rdx
	shr	rax, 63					; 0000003fH
	add	rax, rdx
; Line 89
	ret	0
?GetPTS@@YA_JPEAE@Z ENDP				; GetPTS
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT ?parse_PMT@@YAXPEAEPEAG1@Z
_TEXT	SEGMENT
pbPacket$ = 8
PCRPid$ = 16
CaptionPid$ = 24
?parse_PMT@@YAXPEAEPEAG1@Z PROC				; parse_PMT, COMDAT
; File e:\project\other\caption2ass-master\caption2ass_pcr\tslutil.cpp
; Line 115
	cmp	WORD PTR [rdx], 0
	mov	r11, r8
	mov	r10, rcx
	jne	SHORT $LN9@parse_PMT
; Line 116
	movzx	r9d, WORD PTR [rcx+13]
	movzx	eax, BYTE PTR [rcx+14]
	and	r9w, 31
	shl	r9w, 8
	or	r9w, ax
	mov	WORD PTR [rdx], r9w
$LN9@parse_PMT:
; Line 120
	movzx	edx, WORD PTR [rcx+15]
	mov	eax, edx
	shr	edx, 8
	and	eax, 15
	shl	eax, 8
	movsxd	rcx, eax
	mov	eax, edx
	lea	rdx, QWORD PTR [r10+17]
	or	rcx, rax
	add	rdx, rcx
; Line 122
	add	r10, 184				; 000000b8H
$LN22@parse_PMT:
	cmp	rdx, r10
	jae	SHORT $LN7@parse_PMT
; Line 125
	cmp	BYTE PTR [rdx], 6
	jne	SHORT $LN1@parse_PMT
; Line 127
	movzx	eax, WORD PTR [rdx+3]
	mov	ecx, eax
	shr	eax, 8
	and	ecx, 15
	shl	ecx, 8
	or	ecx, eax
; Line 128
	xor	eax, eax
	add	ecx, -2
	movsxd	r8, ecx
	test	ecx, ecx
	jle	SHORT $LN1@parse_PMT
$LL5@parse_PMT:
; Line 129
	cmp	BYTE PTR [rdx+rax+5], 82		; 00000052H
	jne	SHORT $LN4@parse_PMT
	cmp	BYTE PTR [rax+rdx+6], 1
	jne	SHORT $LN4@parse_PMT
	cmp	BYTE PTR [rax+rdx+7], 48		; 00000030H
	je	SHORT $LN15@parse_PMT
$LN4@parse_PMT:
; Line 128
	inc	rax
	cmp	rax, r8
	jl	SHORT $LL5@parse_PMT
$LN1@parse_PMT:
; Line 139
	movzx	eax, WORD PTR [rdx+3]
	mov	ecx, eax
	shr	eax, 8
	and	ecx, 15
	shl	ecx, 8
	or	eax, ecx
	add	eax, 5
	cdqe
	add	rdx, rax
	jmp	SHORT $LN22@parse_PMT
$LN15@parse_PMT:
; Line 135
	movzx	ecx, WORD PTR [rdx+1]
	movzx	eax, BYTE PTR [rdx+2]
	and	cx, 31
	shl	cx, 8
	or	cx, ax
	mov	WORD PTR [r11], cx
$LN7@parse_PMT:
; Line 141
	fatret	0
?parse_PMT@@YAXPEAEPEAG1@Z ENDP				; parse_PMT
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT ?parse_PAT@@YAXPEAEPEAG@Z
_TEXT	SEGMENT
pbPacket$ = 64
PMTPid$ = 72
?parse_PAT@@YAXPEAEPEAG@Z PROC				; parse_PAT, COMDAT
; File e:\project\other\caption2ass-master\caption2ass_pcr\tslutil.cpp
; Line 92
$LN13:
	mov	QWORD PTR [rsp+8], rbx
	mov	QWORD PTR [rsp+16], rbp
	mov	QWORD PTR [rsp+24], rsi
	push	rdi
	push	r14
	push	r15
	sub	rsp, 32					; 00000020H
	mov	r14, rdx
; Line 95
	xor	esi, esi
	lea	rdi, QWORD PTR [rcx+13]
	mov	r15d, 65535				; 0000ffffH
	npad	9
$LL5@parse_PAT:
; Line 96
	movzx	eax, WORD PTR [rdi]
	movzx	ebp, BYTE PTR [rdi+1]
; Line 97
	movzx	ebx, WORD PTR [rdi+2]
	shl	ax, 8
	and	bx, 31
	or	bp, ax
	movzx	eax, BYTE PTR [rdi+3]
	shl	bx, 8
	or	bx, ax
; Line 98
	cmp	bp, r15w
	je	SHORT $LN9@parse_PAT
; Line 100
	lea	rcx, OFFSET FLAT:??_C@_1DA@MFOHJGPH@?$AAP?$AAr?$AAo?$AAg?$AAr?$AAa?$AAm?$AA?5?$AA?$CF?$AAd?$AA?0?$AA?5?$AAP?$AAI?$AAD?$AA?3?$AA?5?$AA?$CF?$AA0?$AA3?$AAx?$AA?$AN?$AA?6?$AA?$AA@
	movzx	r8d, bx
	movzx	edx, bp
	call	?_tMyPrintf@@YAXPEB_WZZ			; _tMyPrintf
; Line 102
	test	bp, bp
	je	SHORT $LN4@parse_PAT
	cmp	WORD PTR [r14], 0
	jne	SHORT $LN4@parse_PAT
; Line 103
	mov	WORD PTR [r14], bx
$LN4@parse_PAT:
; Line 95
	inc	rsi
	add	rdi, 4
	cmp	rsi, 43					; 0000002bH
	jl	SHORT $LL5@parse_PAT
$LN9@parse_PAT:
; Line 106
	movzx	edx, WORD PTR [r14]
	lea	rcx, OFFSET FLAT:??_C@_1CI@JNKPIML@?$AAS?$AAe?$AAt?$AA?5?$AAP?$AAM?$AAT?$AA_?$AAP?$AAI?$AAD?$AA?5?$AAt?$AAo?$AA?5?$AA?$CF?$AAx?$AA?$AN?$AA?6?$AA?$AA@
; Line 109
	mov	rbx, QWORD PTR [rsp+64]
	mov	rbp, QWORD PTR [rsp+72]
	mov	rsi, QWORD PTR [rsp+80]
	add	rsp, 32					; 00000020H
	pop	r15
	pop	r14
	pop	rdi
; Line 106
	jmp	?_tMyPrintf@@YAXPEB_WZZ			; _tMyPrintf
?parse_PAT@@YAXPEAEPEAG@Z ENDP				; parse_PAT
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT ?resync@@YAHPEAEPEAU_iobuf@@@Z
_TEXT	SEGMENT
pbPacket$ = 48
fp$ = 56
?resync@@YAHPEAEPEAU_iobuf@@@Z PROC			; resync, COMDAT
; File e:\project\other\caption2ass-master\caption2ass_pcr\tslutil.cpp
; Line 28
$LN23:
	mov	QWORD PTR [rsp+8], rbx
	mov	QWORD PTR [rsp+16], rsi
	push	rdi
	sub	rsp, 32					; 00000020H
	mov	rsi, rdx
; File e:\software\develop\vs2012\vc\include\string.h
; Line 229
	mov	edx, 71					; 00000047H
; File e:\project\other\caption2ass-master\caption2ass_pcr\tslutil.cpp
; Line 28
	mov	rdi, rcx
; File e:\software\develop\vs2012\vc\include\string.h
; Line 229
	lea	r8d, QWORD PTR [rdx+117]
	call	QWORD PTR __imp_memchr
; File e:\project\other\caption2ass-master\caption2ass_pcr\tslutil.cpp
; Line 33
	test	rax, rax
	jne	$LN1@resync
; Line 34
	xor	ebx, ebx
	npad	1
$LL7@resync:
; Line 35
	mov	r9, rsi
	mov	edx, 188				; 000000bcH
	mov	r8d, 1
	mov	rcx, rdi
	call	QWORD PTR __imp_fread
	cmp	rax, 1
	jne	SHORT $LN16@resync
; File e:\software\develop\vs2012\vc\include\string.h
; Line 229
	lea	edx, QWORD PTR [rax+70]
	mov	rcx, rdi
	lea	r8d, QWORD PTR [rdx+117]
	call	QWORD PTR __imp_memchr
; File e:\project\other\caption2ass-master\caption2ass_pcr\tslutil.cpp
; Line 41
	test	rax, rax
	jne	SHORT $LN1@resync
; Line 34
	inc	ebx
	cmp	ebx, 20
	jl	SHORT $LL7@resync
; Line 48
	call	QWORD PTR __imp___iob_func
	lea	rdx, OFFSET FLAT:??_C@_0BC@PBMHBCIC@Missing?5syncbyte?6?$AA@
; Line 50
	jmp	SHORT $LN21@resync
$LN16@resync:
; Line 36
	call	QWORD PTR __imp___iob_func
	lea	rdx, OFFSET FLAT:??_C@_0BA@EJBEGBHC@Unexpected?5EOF?6?$AA@
$LN21@resync:
	lea	rcx, QWORD PTR [rax+96]
	call	QWORD PTR __imp_fprintf
; Line 37
	mov	ecx, 2000				; 000007d0H
	call	QWORD PTR __imp_Sleep
; Line 38
	xor	eax, eax
; Line 55
	mov	rbx, QWORD PTR [rsp+48]
	mov	rsi, QWORD PTR [rsp+56]
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
$LN1@resync:
; Line 53
	sub	rax, rdi
	mov	r8d, 1
	mov	rcx, rsi
	lea	rdx, QWORD PTR [rax-188]
	call	QWORD PTR __imp__fseeki64
; Line 55
	mov	rbx, QWORD PTR [rsp+48]
	mov	rsi, QWORD PTR [rsp+56]
	mov	eax, 1
	add	rsp, 32					; 00000020H
	pop	rdi
	ret	0
?resync@@YAHPEAEPEAU_iobuf@@@Z ENDP			; resync
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT ?FindStartOffset@@YAHPEAU_iobuf@@@Z
_TEXT	SEGMENT
buf$ = 32
__$ArrayPad$ = 416
fp$ = 448
?FindStartOffset@@YAHPEAU_iobuf@@@Z PROC		; FindStartOffset, COMDAT
; File e:\project\other\caption2ass-master\caption2ass_pcr\tslutil.cpp
; Line 12
$LN15:
	push	rbx
	sub	rsp, 432				; 000001b0H
	mov	rax, QWORD PTR __security_cookie
	xor	rax, rsp
	mov	QWORD PTR __$ArrayPad$[rsp], rax
	mov	rbx, rcx
; Line 13
	lea	rcx, QWORD PTR buf$[rsp+1]
	xor	edx, edx
	mov	r8d, 375				; 00000177H
	mov	BYTE PTR buf$[rsp], 0
	call	memset
; Line 15
	lea	rcx, QWORD PTR buf$[rsp]
	mov	r9, rbx
	mov	edx, 376				; 00000178H
	mov	r8d, 1
	call	QWORD PTR __imp_fread
	cmp	rax, 1
	jne	SHORT $LN5@FindStartO
; Line 16
	xor	ecx, ecx
	mov	eax, ecx
$LL4@FindStartO:
; Line 17
	cmp	BYTE PTR buf$[rsp+rax], 71		; 00000047H
	jne	SHORT $LN3@FindStartO
	cmp	BYTE PTR buf$[rsp+rax+188], 71		; 00000047H
	je	SHORT $LN10@FindStartO
$LN3@FindStartO:
; Line 16
	inc	rax
	inc	ecx
	cmp	rax, 188				; 000000bcH
	jl	SHORT $LL4@FindStartO
$LN5@FindStartO:
; Line 24
	xor	eax, eax
$LN7@FindStartO:
; Line 25
	mov	rcx, QWORD PTR __$ArrayPad$[rsp]
	xor	rcx, rsp
	call	__security_check_cookie
	add	rsp, 432				; 000001b0H
	pop	rbx
	ret	0
$LN10@FindStartO:
; Line 18
	mov	edx, ecx
	xor	r8d, r8d
	mov	rcx, rbx
	call	QWORD PTR __imp_fseek
; Line 19
	mov	eax, 1
	jmp	SHORT $LN7@FindStartO
?FindStartOffset@@YAHPEAU_iobuf@@@Z ENDP		; FindStartOffset
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT ?memchr@@YAPEAXPEAXH_K@Z
_TEXT	SEGMENT
_Pv$ = 8
_C$dead$ = 16
_N$dead$ = 24
?memchr@@YAPEAXPEAXH_K@Z PROC				; memchr, COMDAT
; File e:\software\develop\vs2012\vc\include\string.h
; Line 229
	mov	edx, 71					; 00000047H
	lea	r8d, QWORD PTR [rdx+117]
	rex_jmp	QWORD PTR __imp_memchr
?memchr@@YAPEAXPEAXH_K@Z ENDP				; memchr
_TEXT	ENDS
END
